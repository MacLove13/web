# Migration `20201119212409-auth`

This migration has been generated by Southclaws at 11/19/2020, 9:24:09 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "User" ADD COLUMN     "pass" TEXT NOT NULL,
ADD COLUMN     "admin" BOOLEAN NOT NULL DEFAULT false,
ADD COLUMN     "verify_key" TEXT NOT NULL,
ADD COLUMN     "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
ADD COLUMN     "updatedAt" TIMESTAMP(3) NOT NULL,
ADD COLUMN     "verified_at" TIMESTAMP(3)

CREATE UNIQUE INDEX "User.email_unique" ON "User"("email")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201009191311-genesis..20201119212409-auth
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider      = "go run github.com/prisma/prisma-client-go"
@@ -11,11 +11,20 @@
 }
 model User {
   id      String   @id @default(uuid())
-  email   String
+  email   String   @unique
   name    String
+  pass    String
+  admin   Boolean  @default(false)
   servers Server[]
+
+  // Account verification key - emailed to user
+  verify_key String
+
+  createdAt   DateTime  @default(now())
+  updatedAt   DateTime  @updatedAt
+  verified_at DateTime? // only set when account is verified
 }
 model Server {
   id String @id @default(uuid())
```


